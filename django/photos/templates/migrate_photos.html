<h1>Google Photos Migration</h1>

<a href="{% url 'destination_google_auth' %}"><button type="submit">Authenticate Destination</button></a>
 {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}



{% if success_all %}
    <p>All photos have been successfully migrated!</p>
{% elif success_selected %}
    <p>Selected photos have been successfully migrated!</p>
{% endif %}

<form method="POST">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th>Select</th>
                <th>Preview</th>
                <th>File Name</th>
            </tr>
        </thead>
        <tbody>
            {% for photo in photos %}
                <tr>
                    <td><input type="checkbox" name="selected_photos" value="{{ photo.id }}"></td>
                    <td><img src="{{ photo.baseUrl }}=s150" alt="{{ photo.filename }}"></td>
                    <td>{{ photo.filename }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" name="action" value="migrate_all">Migrate All Photos</button>
    <button type="submit" name="action" value="migrate_selected">Migrate Selected Photos</button>
</form>

{% if next_page_token %}
    <a href="?page_token={{ next_page_token }}">Next Page</a>
{% endif %}
